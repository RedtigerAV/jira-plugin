<app-header [title]="'Планирование'" [backButtonLink]="'../'"></app-header>

<div class="layout">
  <div class="item">
    <ng-container *ngIf="form">
      <app-control-panel
        [form]="form"
        [hiddenControls]="hiddenControls"
        [controlsDisplay]="'column'"
        [actions]="actions"
      ></app-control-panel>
    </ng-container>
  </div>

  <div class="item">
    <app-tg-card class="planning-table">
      <app-tg-card-title>Planning</app-tg-card-title>
      <app-tg-card-content>
        <div style="width: 100%; text-align: center;" *ngIf="unset | async">
          <span style="color: #657195" class="tg-h4">Нажмите <strong>Начать планирование</strong> чтобы отобразить таблицу</span>
        </div>

        <mat-spinner *ngIf="loader | async" style="margin: auto"></mat-spinner>

        <ag-grid-angular
            #agPlanningGrid
            *ngIf="loaded | async"
            id="myPlanningGrid"
            class="ag-theme-material table-content"
            [columnDefs]="columnDefs"
            [defaultColDef]="defaultColDef"
            [rowData]="rowData"
            [suppressDragLeaveHidesColumns]="true"
            (gridReady)="onGridReady($event)"
            (cellEditingStopped)="onCellEditingStop($event)"
        ></ag-grid-angular>
      </app-tg-card-content>
    </app-tg-card>
  </div>
</div>
